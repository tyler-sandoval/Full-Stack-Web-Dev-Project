
@model FSDP.DATA.EF.Lesson


@{
    ViewBag.Title = "Details for";
}

<div id="bodyNavSeperatorDiv">
    <h2>@ViewBag.Title</h2>
    <h3>@ViewBag.Message</h3>
    <div>
        <h4>@Model.LessonTitle</h4>
        <hr />
        <dl class="dl-horizontal">
            <dt>
                @Html.DisplayNameFor(model => model.LessonTitle)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.LessonTitle)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Introduction)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Introduction)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.VideoUrl)
            </dt>

            <dd>
                <div id="player"></div>

                @*@Html.DisplayFor(model => model.VideoUrl)
                <iframe width="560" height="315" src="@Model.VideoUrl" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
                   <img src=$("http://i3.ytimg.com/vi/{0}/mqdefault.jpg", @Model.VideoUrl ) />*
                </iframe>*@
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.PdfFilename)
            </dt>

            <dd>
                @*<img src="@Url.Content("~/Content/img/pdfs/" + Model.PdfFilename)" alt="@Model.LessonTitle" ></img>*@
                <div class="row">
                    <a target="_blank" href="@Url.Action("DisplayPDF", "StarDocs", Model.PdfFilename)" >Click to View PDF |</a>
 
                    @Html.DisplayFor(model => model.PdfFilename)


                </div>
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.IsActive)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.IsActive)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Cours.CourseName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Cours.CourseName)
            </dd>

        </dl>
    </div>
    <hr />
    <p>
        @if (User.IsInRole("Admin"))
        {
            @Html.ActionLink("Edit", "Edit", new { id = Model.LessonID }) 
            @: |

        }
        @Html.ActionLink("Back to Lessons", "CourseLessons", "Lessons", new { id = Model.CourseID}, null)
    </p>
</div>

@section scripts{
    <script>
        //create youtube player
        var player;
        var h = '@ViewBag.height';
        var w = '@ViewBag.width';
        function onYouTubePlayerAPIReady() {
            player = new YT.Player('player', {
                height: 360,
                width: 640,
                modestbranding: 1,
                videoId: '@ViewBag.VideoID',
                playerVars: {
                    rel: 0,
                    autoplay: 0,
                    disablekb: 0,
                    showsearch: 0,
                    controls: 1,
                    fs: 1,
                    hd: 1,
                    html5: 1,
                    iv_load_policy: 3
                },
                events: {
                    onReady: onPlayerReady,
                    onStateChange: onPlayerStateChange
                }
            });
        }
        //autoplayVideo
        function onPlayerReady(event) {
            event.target.playVideo();
        }

        //when video reaches end
        function onPlayerStateChange(event) {
            if (event.data === 0) {
                //do something on end;
                alert('done');
            }
        }
</script>
}